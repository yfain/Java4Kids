<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="Asciidoctor 0.1.4">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chapter 8. Programming User Interaction in JavaFX</title>
<style>
/*! normalize.css v2.1.2 | MIT License | git.io/normalize */
/* ========================================================================== HTML5 display definitions ========================================================================== */
/** Correct `block` display not defined in IE 8/9. */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }
/** Correct `inline-block` display not defined in IE 8/9. */
audio, canvas, video { display: inline-block; }
/** Prevent modern browsers from displaying `audio` without controls. Remove excess height in iOS 5 devices. */
audio:not([controls]) { display: none; height: 0; }
/** Address `[hidden]` styling not present in IE 8/9. Hide the `template` element in IE, Safari, and Firefox < 22. */
[hidden], template { display: none; }
script { display: none !important; }
/* ========================================================================== Base ========================================================================== */
/** 1. Set default font family to sans-serif. 2. Prevent iOS text size adjust after orientation change, without disabling user zoom. */
html { font-family: sans-serif; /* 1 */ -ms-text-size-adjust: 100%; /* 2 */ -webkit-text-size-adjust: 100%; /* 2 */ }
/** Remove default margin. */
body { margin: 0; }
/* ========================================================================== Links ========================================================================== */
/** Remove the gray background color from active links in IE 10. */
a { background: transparent; }
/** Address `outline` inconsistency between Chrome and other browsers. */
a:focus { outline: thin dotted; }
/** Improve readability when focused and also mouse hovered in all browsers. */
a:active, a:hover { outline: 0; }
/* ========================================================================== Typography ========================================================================== */
/** Address variable `h1` font-size and margin within `section` and `article` contexts in Firefox 4+, Safari 5, and Chrome. */
h1 { font-size: 2em; margin: 0.67em 0; }
/** Address styling not present in IE 8/9, Safari 5, and Chrome. */
abbr[title] { border-bottom: 1px dotted; }
/** Address style set to `bolder` in Firefox 4+, Safari 5, and Chrome. */
b, strong { font-weight: bold; }
/** Address styling not present in Safari 5 and Chrome. */
dfn { font-style: italic; }
/** Address differences between Firefox and other browsers. */
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }
/** Address styling not present in IE 8/9. */
mark { background: #ff0; color: #000; }
/** Correct font family set oddly in Safari 5 and Chrome. */
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }
/** Improve readability of pre-formatted text in all browsers. */
pre { white-space: pre-wrap; }
/** Set consistent quote types. */
q { quotes: "\201C" "\201D" "\2018" "\2019"; }
/** Address inconsistent and variable font size in all browsers. */
small { font-size: 80%; }
/** Prevent `sub` and `sup` affecting `line-height` in all browsers. */
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }
sup { top: -0.5em; }
sub { bottom: -0.25em; }
/* ========================================================================== Embedded content ========================================================================== */
/** Remove border when inside `a` element in IE 8/9. */
img { border: 0; }
/** Correct overflow displayed oddly in IE 9. */
svg:not(:root) { overflow: hidden; }
/* ========================================================================== Figures ========================================================================== */
/** Address margin not present in IE 8/9 and Safari 5. */
figure { margin: 0; }
/* ========================================================================== Forms ========================================================================== */
/** Define consistent border, margin, and padding. */
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }
/** 1. Correct `color` not being inherited in IE 8/9. 2. Remove padding so people aren't caught out if they zero out fieldsets. */
legend { border: 0; /* 1 */ padding: 0; /* 2 */ }
/** 1. Correct font family not being inherited in all browsers. 2. Correct font size not being inherited in all browsers. 3. Address margins set differently in Firefox 4+, Safari 5, and Chrome. */
button, input, select, textarea { font-family: inherit; /* 1 */ font-size: 100%; /* 2 */ margin: 0; /* 3 */ }
/** Address Firefox 4+ setting `line-height` on `input` using `!important` in the UA stylesheet. */
button, input { line-height: normal; }
/** Address inconsistent `text-transform` inheritance for `button` and `select`. All other form control elements do not inherit `text-transform` values. Correct `button` style inheritance in Chrome, Safari 5+, and IE 8+. Correct `select` style inheritance in Firefox 4+ and Opera. */
button, select { text-transform: none; }
/** 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio` and `video` controls. 2. Correct inability to style clickable `input` types in iOS. 3. Improve usability and consistency of cursor style between image-type `input` and others. */
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; /* 2 */ cursor: pointer; /* 3 */ }
/** Re-set default cursor for disabled elements. */
button[disabled], html input[disabled] { cursor: default; }
/** 1. Address box sizing set to `content-box` in IE 8/9. 2. Remove excess padding in IE 8/9. */
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; /* 1 */ padding: 0; /* 2 */ }
/** 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome. 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome (include `-moz` to future-proof). */
input[type="search"] { -webkit-appearance: textfield; /* 1 */ -moz-box-sizing: content-box; -webkit-box-sizing: content-box; /* 2 */ box-sizing: content-box; }
/** Remove inner padding and search cancel button in Safari 5 and Chrome on OS X. */
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }
/** Remove inner padding and border in Firefox 4+. */
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }
/** 1. Remove default vertical scrollbar in IE 8/9. 2. Improve readability and alignment in all browsers. */
textarea { overflow: auto; /* 1 */ vertical-align: top; /* 2 */ }
/* ========================================================================== Tables ========================================================================== */
/** Remove most spacing between table cells. */
table { border-collapse: collapse; border-spacing: 0; }
meta.foundation-mq-small { font-family: "only screen and (min-width: 768px)"; width: 768px; }
meta.foundation-mq-medium { font-family: "only screen and (min-width:1280px)"; width: 1280px; }
meta.foundation-mq-large { font-family: "only screen and (min-width:1440px)"; width: 1440px; }
*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }
html, body { font-size: 100%; }
body { background: white; color: rgba(0, 0, 0, 0.8); padding: 0; margin: 0; font-family: "Noto Serif", "DejaVu Serif", serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }
a:hover { cursor: pointer; }
img, object, embed { max-width: 100%; height: auto; }
object, embed { height: 100%; }
img { -ms-interpolation-mode: bicubic; }
#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }
.left { float: left !important; }
.right { float: right !important; }
.text-left { text-align: left !important; }
.text-right { text-align: right !important; }
.text-center { text-align: center !important; }
.text-justify { text-align: justify !important; }
.hide { display: none; }
.antialiased, body { -webkit-font-smoothing: antialiased; }
img { display: inline-block; vertical-align: middle; }
textarea { height: auto; min-height: 50px; }
select { width: 100%; }
p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }
.subheader, .admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { line-height: 1.45; color: #7a2518; font-weight: normal; margin-top: 0; margin-bottom: 0.25em; }
/* Typography resets */
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }
/* Default Link Styles */
a { color: #2156a5; text-decoration: underline; line-height: inherit; }
a:hover, a:focus { color: #1d4b8f; }
a img { border: none; }
/* Default paragraph styles */
p { font-family: inherit; font-weight: normal; font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }
/* Default header styles */
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: "Open Sans", "DejaVu Sans", sans-serif; font-weight: 300; font-style: normal; color: #ba3925; text-rendering: optimizeLegibility; margin-top: 1em; margin-bottom: 0.5em; line-height: 1.0125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #e99b8f; line-height: 0; }
h1 { font-size: 2.125em; }
h2 { font-size: 1.6875em; }
h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }
h4 { font-size: 1.125em; }
h5 { font-size: 1.125em; }
h6 { font-size: 1em; }
hr { border: solid #ddddd8; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }
/* Helpful Typography Defaults */
em, i { font-style: italic; line-height: inherit; }
strong, b { font-weight: bold; line-height: inherit; }
small { font-size: 60%; line-height: inherit; }
code { font-family: "Droid Sans Mono", "DejaVu Sans Mono", "Monospace", monospace; font-weight: normal; color: rgba(0, 0, 0, 0.9); }
/* Lists */
ul, ol, dl { font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; list-style-position: outside; font-family: inherit; }
ul, ol { margin-left: 1.5em; }
ul.no-bullet, ol.no-bullet { margin-left: 1.5em; }
/* Unordered Lists */
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; /* Override nested font-size change */ }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }
/* Ordered Lists */
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }
/* Definition Lists */
dl dt { margin-bottom: 0.3125em; font-weight: bold; }
dl dd { margin-bottom: 1.25em; }
/* Abbreviations */
abbr, acronym { text-transform: uppercase; font-size: 90%; color: rgba(0, 0, 0, 0.8); border-bottom: 1px dotted #dddddd; cursor: help; }
abbr { text-transform: none; }
/* Blockquotes */
blockquote { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
blockquote cite { display: block; font-size: 0.9375em; color: rgba(0, 0, 0, 0.6); }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: rgba(0, 0, 0, 0.6); }
blockquote, blockquote p { line-height: 1.6; color: rgba(0, 0, 0, 0.85); }
/* Microformats */
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #dddddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }
.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }
@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.2; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }
/* Tables */
table { background: white; margin-bottom: 1.25em; border: solid 1px #dedede; }
table thead, table tfoot { background: #f7f8f7; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: inherit; color: rgba(0, 0, 0, 0.8); text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: inherit; color: rgba(0, 0, 0, 0.8); }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #f8f8f7; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.6; }
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.2; word-spacing: -0.05em; }
h1 strong, h2 strong, h3 strong, #toctitle strong, .sidebarblock > .content > .title strong, h4 strong, h5 strong, h6 strong { font-weight: 400; }
.clearfix:before, .clearfix:after, .float-group:before, .float-group:after { content: " "; display: table; }
.clearfix:after, .float-group:after { clear: both; }
*:not(pre) > code { font-size: 0.9375em; font-style: normal !important; letter-spacing: 0; padding: 0.1em 0.5ex; word-spacing: -0.15em; background-color: #f7f7f8; -webkit-border-radius: 4px; border-radius: 4px; line-height: 1.45; text-rendering: optimizeSpeed; }
pre, pre > code { line-height: 1.45; color: rgba(0, 0, 0, 0.9); font-family: "Droid Sans Mono", "DejaVu Sans Mono", "Monospace", monospace; font-weight: normal; text-rendering: optimizeSpeed; }
.keyseq { color: rgba(51, 51, 51, 0.8); }
kbd { display: inline-block; color: rgba(0, 0, 0, 0.8); font-size: 0.75em; line-height: 1.4; background-color: #f7f7f7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; margin: -0.15em 0.15em 0 0.15em; padding: 0.2em 0.6em 0.2em 0.5em; vertical-align: middle; white-space: nowrap; }
.keyseq kbd:first-child { margin-left: 0; }
.keyseq kbd:last-child { margin-right: 0; }
.menuseq, .menu { color: rgba(0, 0, 0, 0.8); }
b.button:before, b.button:after { position: relative; top: -1px; font-weight: normal; }
b.button:before { content: "["; padding: 0 3px 0 2px; }
b.button:after { content: "]"; padding: 0 2px 0 3px; }
p a > code:hover { color: rgba(0, 0, 0, 0.9); }
#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 0.9375em; padding-right: 0.9375em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }
#content { margin-top: 1.25em; }
#content:before { content: none; }
#header > h1:first-child { color: rgba(0, 0, 0, 0.85); margin-top: 2.25rem; margin-bottom: 0; }
#header > h1:first-child + #toc { margin-top: 8px; border-top: 1px solid #ddddd8; }
#header > h1:only-child, body.toc2 #header > h1:nth-last-child(2) { border-bottom: 1px solid #ddddd8; padding-bottom: 8px; }
#header .details { border-bottom: 1px solid #ddddd8; line-height: 1.45; padding-top: 0.25em; padding-bottom: 0.25em; padding-left: 0.25em; color: rgba(0, 0, 0, 0.6); display: -ms-flexbox; display: -webkit-flex; display: flex; -ms-flex-flow: row wrap; -webkit-flex-flow: row wrap; flex-flow: row wrap; }
#header .details span:first-child { margin-left: -0.125em; }
#header .details span.email a { color: rgba(0, 0, 0, 0.85); }
#header .details br { display: none; }
#header .details br + span:before { content: "\00a0\2013\00a0"; }
#header .details br + span.author:before { content: "\00a0\22c5\00a0"; color: rgba(0, 0, 0, 0.85); }
#header .details br + span#revremark:before { content: "\00a0|\00a0"; }
#header #revnumber { text-transform: capitalize; }
#header #revnumber:after { content: "\00a0"; }
#content > h1:first-child:not([class]) { color: rgba(0, 0, 0, 0.85); border-bottom: 1px solid #ddddd8; padding-bottom: 8px; margin-top: 0; padding-top: 1rem; margin-bottom: 1.25rem; }
#toc { border-bottom: 1px solid #efefed; padding-bottom: 0.5em; }
#toc > ul { margin-left: 0.125em; }
#toc ul.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1 { margin: 0.5em 0; }
#toc ul { font-family: "Open Sans", "DejaVu Sans", sans-serif; list-style-type: none; }
#toc a { text-decoration: none; }
#toc a:active { text-decoration: underline; }
#toctitle { color: #7a2518; font-size: 1.2em; }
@media only screen and (min-width: 768px) { #toctitle { font-size: 1.375em; }
  body.toc2 { padding-left: 15em; padding-right: 0; }
  #toc.toc2 { margin-top: 0 !important; background-color: #f8f8f7; position: fixed; width: 15em; left: 0; top: 0; border-right: 1px solid #efefed; border-top-width: 0 !important; border-bottom-width: 0 !important; z-index: 1000; padding: 1.25em 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; font-size: 1.2em; }
  #toc.toc2 > ul { font-size: 0.9em; margin-bottom: 0; }
  #toc.toc2 ul ul { margin-left: 0; padding-left: 1em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 15em; }
  body.toc2.toc-right #toc.toc2 { border-right-width: 0; border-left: 1px solid #efefed; left: auto; right: 0; } }
@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; padding-right: 0; }
  #toc.toc2 { width: 20em; }
  #toc.toc2 #toctitle { font-size: 1.375em; }
  #toc.toc2 > ul { font-size: 0.95em; }
  #toc.toc2 ul ul { padding-left: 1.25em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; } }
#content #toc { border-style: solid; border-width: 1px; border-color: #e0e0dc; margin-bottom: 1.25em; padding: 1.25em; background: #f8f8f7; -webkit-border-radius: 4px; border-radius: 4px; }
#content #toc > :first-child { margin-top: 0; }
#content #toc > :last-child { margin-bottom: 0; }
#footer { max-width: 100%; background-color: rgba(0, 0, 0, 0.8); padding: 1.25em; }
#footer-text { color: rgba(255, 255, 255, 0.8); line-height: 1.44; }
.sect1 { padding-bottom: 0.625em; }
@media only screen and (min-width: 768px) { .sect1 { padding-bottom: 1.25em; } }
.sect1 + .sect1 { border-top: 1px solid #efefed; }
#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; z-index: 1001; width: 1.5ex; margin-left: -1.5ex; display: block; text-decoration: none !important; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: "\00A7"; font-size: 0.85em; display: block; padding-top: 0.1em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #ba3925; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #a53221; }
.audioblock, .imageblock, .literalblock, .listingblock, .stemblock, .videoblock { margin-bottom: 1.25em; }
.admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { text-rendering: optimizeLegibility; text-align: left; font-family: "Noto Serif", "DejaVu Serif", serif; font-size: 1rem; font-style: italic; }
table.tableblock > caption.title { white-space: nowrap; overflow: visible; max-width: 0; }
.paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { color: rgba(0, 0, 0, 0.85); }
table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }
.admonitionblock > table { border-collapse: separate; border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: none; }
.admonitionblock > table td.icon .title { font-weight: bold; font-family: "Open Sans", "DejaVu Sans", sans-serif; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #ddddd8; color: rgba(0, 0, 0, 0.6); }
.admonitionblock > table td.content > :last-child > :last-child { margin-bottom: 0; }
.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; -webkit-border-radius: 4px; border-radius: 4px; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }
.sidebarblock { border-style: solid; border-width: 1px; border-color: #e0e0dc; margin-bottom: 1.25em; padding: 1.25em; background: #f8f8f7; -webkit-border-radius: 4px; border-radius: 4px; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock > .content > .title { color: #7a2518; margin-top: 0; text-align: center; }
.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }
.literalblock pre, .listingblock pre:not(.highlight), .listingblock pre[class="highlight"], .listingblock pre[class^="highlight "], .listingblock pre.CodeRay, .listingblock pre.prettyprint { background: #f7f7f8; }
.sidebarblock .literalblock pre, .sidebarblock .listingblock pre:not(.highlight), .sidebarblock .listingblock pre[class="highlight"], .sidebarblock .listingblock pre[class^="highlight "], .sidebarblock .listingblock pre.CodeRay, .sidebarblock .listingblock pre.prettyprint { background: #f2f1f1; }
.literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { -webkit-border-radius: 4px; border-radius: 4px; word-wrap: break-word; padding: 1em; font-size: 0.8125em; }
.literalblock pre.nowrap, .literalblock pre[class].nowrap, .listingblock pre.nowrap, .listingblock pre[class].nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
@media only screen and (min-width: 768px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 0.90625em; } }
@media only screen and (min-width: 1280px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 1em; } }
.literalblock.output pre { color: #f7f7f8; background-color: rgba(0, 0, 0, 0.9); }
.listingblock pre.highlightjs { padding: 0; }
.listingblock pre.highlightjs > code { padding: 1em; -webkit-border-radius: 4px; border-radius: 4px; }
.listingblock pre.prettyprint { border-width: 0; }
.listingblock > .content { position: relative; }
.listingblock code[data-lang]:before { display: none; content: attr(data-lang); position: absolute; font-size: 0.75em; top: 0.425rem; right: 0.5rem; line-height: 1; text-transform: uppercase; color: #999; }
.listingblock:hover code[data-lang]:before { display: block; }
.listingblock.terminal pre .command:before { content: attr(data-prompt); padding-right: 0.5em; color: #999; }
.listingblock.terminal pre .command:not([data-prompt]):before { content: "$"; }
table.pyhltable { border-collapse: separate; border: 0; margin-bottom: 0; background: none; }
table.pyhltable td { vertical-align: top; padding-top: 0; padding-bottom: 0; }
table.pyhltable td.code { padding-left: .75em; padding-right: 0; }
pre.pygments .lineno, table.pyhltable td:not(.code) { color: #999; padding-left: 0; padding-right: .5em; border-right: 1px solid #ddddd8; }
pre.pygments .lineno { display: inline-block; margin-right: .25em; }
table.pyhltable .linenodiv { background: none !important; padding-right: 0 !important; }
.quoteblock { margin: 0 1em 1.25em 1.5em; display: table; }
.quoteblock > .title { margin-left: -1.5em; margin-bottom: 0.75em; }
.quoteblock blockquote, .quoteblock blockquote p { color: rgba(0, 0, 0, 0.85); font-size: 1.15rem; line-height: 1.75; word-spacing: 0.1em; letter-spacing: 0; font-style: italic; text-align: justify; }
.quoteblock blockquote { margin: 0; padding: 0; border: 0; }
.quoteblock blockquote:before { content: "\201c"; float: left; font-size: 2.75em; font-weight: bold; line-height: 0.6em; margin-left: -0.6em; color: #7a2518; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1); }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: 0.5em; margin-right: 0.5ex; text-align: right; }
.quoteblock .quoteblock { margin-left: 0; margin-right: 0; padding: 0.5em 0; border-left: 3px solid rgba(0, 0, 0, 0.6); }
.quoteblock .quoteblock blockquote { padding: 0 0 0 0.75em; }
.quoteblock .quoteblock blockquote:before { display: none; }
.verseblock { margin: 0 1em 1.25em 1em; }
.verseblock pre { font-family: "Open Sans", "DejaVu Sans", sans; font-size: 1.15rem; color: rgba(0, 0, 0, 0.85); font-weight: 300; text-rendering: optimizeLegibility; }
.verseblock pre strong { font-weight: 400; }
.verseblock .attribution { margin-top: 1.25rem; margin-left: 0.5ex; }
.quoteblock .attribution, .verseblock .attribution { font-size: 0.9375em; line-height: 1.45; font-style: italic; }
.quoteblock .attribution br, .verseblock .attribution br { display: none; }
.quoteblock .attribution cite, .verseblock .attribution cite { display: block; letter-spacing: -0.05em; color: rgba(0, 0, 0, 0.6); }
.quoteblock.abstract { margin: 0 0 1.25em 0; display: block; }
.quoteblock.abstract blockquote, .quoteblock.abstract blockquote p { text-align: left; word-spacing: 0; }
.quoteblock.abstract blockquote:before, .quoteblock.abstract blockquote p:first-of-type:before { display: none; }
table.tableblock { max-width: 100%; border-collapse: separate; }
table.tableblock td > .paragraph:last-child p > p:last-child, table.tableblock th > p:last-child, table.tableblock td > p:last-child { margin-bottom: 0; }
table.spread { width: 100%; }
table.tableblock, th.tableblock, td.tableblock { border: 0 solid #dedede; }
table.grid-all th.tableblock, table.grid-all td.tableblock { border-width: 0 1px 1px 0; }
table.grid-all tfoot > tr > th.tableblock, table.grid-all tfoot > tr > td.tableblock { border-width: 1px 1px 0 0; }
table.grid-cols th.tableblock, table.grid-cols td.tableblock { border-width: 0 1px 0 0; }
table.grid-all * > tr > .tableblock:last-child, table.grid-cols * > tr > .tableblock:last-child { border-right-width: 0; }
table.grid-rows th.tableblock, table.grid-rows td.tableblock { border-width: 0 0 1px 0; }
table.grid-all tbody > tr:last-child > th.tableblock, table.grid-all tbody > tr:last-child > td.tableblock, table.grid-all thead:last-child > tr > th.tableblock, table.grid-rows tbody > tr:last-child > th.tableblock, table.grid-rows tbody > tr:last-child > td.tableblock, table.grid-rows thead:last-child > tr > th.tableblock { border-bottom-width: 0; }
table.grid-rows tfoot > tr > th.tableblock, table.grid-rows tfoot > tr > td.tableblock { border-width: 1px 0 0 0; }
table.frame-all { border-width: 1px; }
table.frame-sides { border-width: 0 1px; }
table.frame-topbot { border-width: 1px 0; }
th.halign-left, td.halign-left { text-align: left; }
th.halign-right, td.halign-right { text-align: right; }
th.halign-center, td.halign-center { text-align: center; }
th.valign-top, td.valign-top { vertical-align: top; }
th.valign-bottom, td.valign-bottom { vertical-align: bottom; }
th.valign-middle, td.valign-middle { vertical-align: middle; }
table thead th, table tfoot th { font-weight: bold; }
tbody tr th { display: table-cell; line-height: 1.6; background: #f7f8f7; }
tbody tr th, tbody tr th p, tfoot tr th, tfoot tr th p { color: rgba(0, 0, 0, 0.8); font-weight: bold; }
p.tableblock > code:only-child { background: none; padding: 0; }
p.tableblock { font-size: 1em; }
td > div.verse { white-space: pre; }
ol { margin-left: 1.75em; }
ul li ol { margin-left: 1.5em; }
dl dd { margin-left: 1.125em; }
dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }
ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist { margin-bottom: 0.625em; }
ul.unstyled, ol.unnumbered, ul.checklist, ul.none { list-style-type: none; }
ul.unstyled, ol.unnumbered, ul.checklist { margin-left: 0.625em; }
ul.checklist li > p:first-child > .fa-check-square-o:first-child, ul.checklist li > p:first-child > input[type="checkbox"]:first-child { margin-right: 0.25em; }
ul.checklist li > p:first-child > input[type="checkbox"]:first-child { position: relative; top: 1px; }
ul.inline { margin: 0 auto 0.625em auto; margin-left: -1.375em; margin-right: 0; padding: 0; list-style: none; overflow: hidden; }
ul.inline > li { list-style: none; float: left; margin-left: 1.375em; display: block; }
ul.inline > li > * { display: block; }
.unstyled dl dt { font-weight: normal; font-style: normal; }
ol.arabic { list-style-type: decimal; }
ol.decimal { list-style-type: decimal-leading-zero; }
ol.loweralpha { list-style-type: lower-alpha; }
ol.upperalpha { list-style-type: upper-alpha; }
ol.lowerroman { list-style-type: lower-roman; }
ol.upperroman { list-style-type: upper-roman; }
ol.lowergreek { list-style-type: lower-greek; }
.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }
td.hdlist1 { padding-right: .75em; font-weight: bold; }
td.hdlist1, td.hdlist2 { vertical-align: top; }
.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }
.colist > table tr > td:first-of-type { padding: 0 0.75em; line-height: 1; }
.colist > table tr > td:last-of-type { padding: 0.25em 0; }
.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: 0 0 0 1px #dddddd; box-shadow: 0 0 0 1px #dddddd; }
.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }
.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }
a.image { text-decoration: none; }
span.footnote, span.footnoteref { vertical-align: super; font-size: 0.875em; }
span.footnote a, span.footnoteref a { text-decoration: none; }
span.footnote a:active, span.footnoteref a:active { text-decoration: underline; }
#footnotes { padding-top: 0.75em; padding-bottom: 0.75em; margin-bottom: 0.625em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -.25em 0 .75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { padding: 0 0.375em; line-height: 1.3; font-size: 0.875em; margin-left: 1.2em; text-indent: -1.2em; margin-bottom: .2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }
#content #footnotes { margin-top: -0.625em; margin-bottom: 0; padding: 0.75em 0; }
.gist .file-data > table { border: 0; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }
div.unbreakable { page-break-inside: avoid; }
.big { font-size: larger; }
.small { font-size: smaller; }
.underline { text-decoration: underline; }
.overline { text-decoration: overline; }
.line-through { text-decoration: line-through; }
.aqua { color: #00bfbf; }
.aqua-background { background-color: #00fafa; }
.black { color: black; }
.black-background { background-color: black; }
.blue { color: #0000bf; }
.blue-background { background-color: #0000fa; }
.fuchsia { color: #bf00bf; }
.fuchsia-background { background-color: #fa00fa; }
.gray { color: #606060; }
.gray-background { background-color: #7d7d7d; }
.green { color: #006000; }
.green-background { background-color: #007d00; }
.lime { color: #00bf00; }
.lime-background { background-color: #00fa00; }
.maroon { color: #600000; }
.maroon-background { background-color: #7d0000; }
.navy { color: #000060; }
.navy-background { background-color: #00007d; }
.olive { color: #606000; }
.olive-background { background-color: #7d7d00; }
.purple { color: #600060; }
.purple-background { background-color: #7d007d; }
.red { color: #bf0000; }
.red-background { background-color: #fa0000; }
.silver { color: #909090; }
.silver-background { background-color: #bcbcbc; }
.teal { color: #006060; }
.teal-background { background-color: #007d7d; }
.white { color: #bfbfbf; }
.white-background { background-color: #fafafa; }
.yellow { color: #bfbf00; }
.yellow-background { background-color: #fafa00; }
span.icon > .fa { cursor: default; }
.admonitionblock td.icon [class^="fa icon-"] { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #19407c; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }
.conum[data-value] { display: inline-block; color: #fff !important; background-color: rgba(0, 0, 0, 0.8); -webkit-border-radius: 100px; border-radius: 100px; text-align: center; font-size: 0.75em; width: 1.67em; height: 1.67em; line-height: 1.67em; font-family: "Open Sans", "DejaVu Sans", sans-serif; font-style: normal; font-weight: bold; }
.conum[data-value] * { color: #fff !important; }
.conum[data-value] + b { display: none; }
.conum[data-value]:after { content: attr(data-value); }
pre .conum[data-value] { position: relative; top: -0.125em; }
b.conum * { color: inherit !important; }
.conum:not([data-value]):empty { display: none; }
h1, h2 { letter-spacing: -0.01em; }
dt, th.tableblock, td.content { text-rendering: optimizeLegibility; }
p, td.content { letter-spacing: -0.01em; }
p strong, td.content strong { letter-spacing: -0.005em; }
p, blockquote, dt, td.content { font-size: 1.0625rem; }
p { margin-bottom: 1.25rem; }
.sidebarblock p, .sidebarblock dt, .sidebarblock td.content, p.tableblock { font-size: 1em; }
.exampleblock > .content { background-color: #fffef7; border-color: #e0e0dc; -webkit-box-shadow: 0 1px 4px #e0e0dc; box-shadow: 0 1px 4px #e0e0dc; }
.print-only { display: none !important; }
@media print { @page { margin: 1.25cm 0.75cm; }
  * { -webkit-box-shadow: none !important; box-shadow: none !important; text-shadow: none !important; }
  a { color: inherit !important; text-decoration: underline !important; }
  a.bare, a[href^="#"], a[href^="mailto:"] { text-decoration: none !important; }
  a[href^="http:"]:not(.bare):after, a[href^="https:"]:not(.bare):after, a[href^="mailto:"]:not(.bare):after { content: "(" attr(href) ")"; display: inline-block; font-size: 0.875em; padding-left: 0.25em; }
  abbr[title]:after { content: " (" attr(title) ")"; }
  pre, blockquote, tr, img { page-break-inside: avoid; }
  thead { display: table-header-group; }
  img { max-width: 100% !important; }
  p, blockquote, dt, td.content { font-size: 1em; orphans: 3; widows: 3; }
  h2, h3, #toctitle, .sidebarblock > .content > .title, #toctitle, .sidebarblock > .content > .title { page-break-after: avoid; }
  #toc, .sidebarblock, .exampleblock > .content { background: none !important; }
  #toc { border-bottom: 1px solid #ddddd8 !important; padding-bottom: 0 !important; }
  .sect1 { padding-bottom: 0 !important; }
  .sect1 + .sect1 { border: 0 !important; }
  #header > h1:first-child { margin-top: 1.25rem; }
  body.book #header { text-align: center; }
  body.book #header > h1:first-child { border: 0 !important; margin: 2.5em 0 1em 0; }
  body.book #header .details { border: 0 !important; display: block; padding: 0 !important; }
  body.book #header .details span:first-child { margin-left: 0 !important; }
  body.book #header .details br { display: block; }
  body.book #header .details br + span:before { content: none !important; }
  body.book #toc { border: 0 !important; text-align: left !important; padding: 0 !important; margin: 0 !important; }
  body.book #toc, body.book #preamble, body.book h1.sect0, body.book .sect1 > h2 { page-break-before: always; }
  .listingblock code[data-lang]:before { display: block; }
  #footer { background: none !important; padding: 0 0.9375em; }
  #footer-text { color: rgba(0, 0, 0, 0.6) !important; font-size: 0.9em; }
  .hide-on-print { display: none !important; }
  .print-only { display: block !important; }
  .hide-for-print { display: none !important; }
  .show-for-print { display: inherit !important; } }
</style>
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.1/css/font-awesome.min.css">
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/styles/default.min.css">
<script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
</head>
<body class="book">
<div id="header">
</div>
<div id="content">
<div class="sect1">
<h2 id="_chapter-8-programming-user-interaction-in-javafx"><a class="anchor" href="#_chapter-8-programming-user-interaction-in-javafx"></a>Chapter 8. Programming User Interaction in JavaFX</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After the GUI design is done, we need hook it up with the  application code written in Java. The Sign In and calculator windows from Chapter 7 looks good, but none of them would react on user&#8217;s actions. No matter how hard you click on the Sign In or calculator&#8217;s buttons, nothing will happen because we didn&#8217;t teach these application how to react on user-generated events (e.g. button clicks).</p>
</div>
<div class="paragraph">
<p>Events are notifications that something important for the application has happened. In this chapter I&#8217;ll explain you how to write code to handle some of such events.</p>
</div>
<div class="paragraph">
<p>When IDEA creates a new JavaFX project it generates an empty class <code>Controller</code>, which is a right place for the code that communicates with GUI components. In this chapter we&#8217;ll establish a link between GUI and the controller. We&#8217;ll also add event handlers and will right code to modify the GUI. I&#8217;ll continue working with FXML samples created in the previous chapter, but this time the GUI events will be handled by the code from the controller class.</p>
</div>
<div class="paragraph">
<p>You&#8217;ll learn how data binding can make automatically update the properties of a GUI component if a property of a Java controller class changes.</p>
</div>
<div class="sect2">
<h3 id="_events"><a class="anchor" href="#_events"></a>Events</h3>
<div class="paragraph">
<p>JavaFX applications have to deal with various events. For example, a button click, a mouse move etc. An event object is represented by the instance of the class <code>Event</code> located in the packages <code>javafx.event</code> and <code>javafx.scene.input</code>. You need to know what events are important to your program and, as the programmers say, "listen to events". You&#8217;ll always write event handlers (a.k.a. event listeners) in Java, but there are different ways of assigning event handlers to GUI elements. If your GUI is designed with FXML, you&#8217;ll need to specify the name of your controller class right in the FXML file. If your GUI is designed with Java, using a separate controller class is not a must, but is recommended for code that has to process multiple events.</p>
</div>
<div id="FIG8-1-0" class="imageblock">
<div class="content">
<img src="./images/fig_8-01-1.png" alt="fig 8 01 1">
</div>
<div class="title">Figure 1. Event listeners</div>
</div>
<div class="paragraph">
<p>You can either create with <code>new</code> or <em>inject</em> an instance of your controller class into Java code. I&#8217;ll explain you what injection means in a bit.</p>
</div>
<div class="sect3">
<h4 id="_assigning-event-handlers-in-fxml"><a class="anchor" href="#_assigning-event-handlers-in-fxml"></a>Assigning Event Handlers in FXML</h4>
<div class="paragraph">
<p>Scene Builder allows you not only to design and arrange the GUI components on the scene, but also assign the Java code that will be handing events. We&#8217;ll stick to our principles of separating GUI and application logic, and will keep the GUI in .fxml file, but processing in Java.</p>
</div>
<div class="paragraph">
<p>In Scene Builder you may have noticed the <em>Controller</em> bar in the bottom left corner. This is the place were you can specify a Java class that will contain event handling code and may use other classes implementing application logic.</p>
</div>
<div class="paragraph">
<p>At the bottom right corner of Scene Builder you may notice a tab titled Code. This is where you can assign event handler methods to selected GUI component after assigning the controller class. So you could select have selected, say a button in the central canvas and assign its click handler right in the <em>Code</em> section for this button.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_hooking-up-a-controller-to-gui"><a class="anchor" href="#_hooking-up-a-controller-to-gui"></a>Hooking up a Controller to GUI</h3>
<div class="paragraph">
<p>Since we&#8217;re separating the GUI code form the application logic, we need a way to specify that a particular FXML file should use a particular controller. In Chapter 7 I didn&#8217;t bring your attention to where it&#8217;s done in FXML, but if you&#8217;ll look at any of the FXML files, you&#8217;ll see that the name of the controller was specified there when IDEA generated the project for us.</p>
</div>
<div class="sect3">
<h4 id="_adding-controller-to-sign-in-application"><a class="anchor" href="#_adding-controller-to-sign-in-application"></a>Adding Controller to Sign In application</h4>
<div class="paragraph">
<p>To illustrate the use of controllers, I&#8217;ll continue working on the sample Sign In project from Chapter 7. It has a file signin.fxml that includes the following <code>GridPane</code> tag:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="xml language-xml">&lt;GridPane hgap="10" vgap="10"
    xmlns="http://javafx.com/javafx/8" xmlns:fx="http://javafx.com/fxml/1" fx:controller="signin.Controller"&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>hgap</code> and <code>vgap</code> attributes specify the padding between the grid grid columns and rows. The <code>xmlns</code> attributes specify so called namespaces required for proper parsing of FXML files. And the attribute <code>fx:controller</code> specifies the full name of the class <code>Controller</code>, which in our project is located in the package <code>signin</code>.</p>
</div>
<div class="paragraph">
<p>When the file signin.fxml is loaded, JavaFX runtime creates an instance of the class <code>signin.Controller</code> and injects it in the instance of the GUI class generated from FXML. The word injection describes the situation when a runtime automatically instantiate a class B and make it available in class A. For us it means that there is no  need to create an instance of the <code>signin.Controller</code> manually by using the <code>new</code> operator.</p>
</div>
<div class="paragraph">
<p>The first version of our controller class is shown next:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">package signin;

import javafx.event.ActionEvent;

public class Controller {

  public void signInClicked(ActionEvent evt){

    System.out.println("Hello from signInClicked method in controller");
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The class <code>Controller</code> uses the class <code>ActionEvent</code> from package <code>javafx.event</code>, and I want to warn you - be careful when IDE will offer you help in insert an import statement for you. There is also an <code>ActionEvent</code> in the package <code>java.awt.event</code>, which we don&#8217;t want in this case.</p>
</div>
<div class="paragraph">
<p>We want the method <code>signInClicked</code> to be called on the controller if the user clicks on the button. For this to happen, we need to specify the name of this method as a handler of the <code>onAction</code> event in the Button element in signin.fxml as shown on Figure 8-2.</p>
</div>
<div id="FIG8-1" class="imageblock">
<div class="content">
<img src="./images/fig_8_01.png" alt="fig 8 01">
</div>
<div class="title">Figure 2. Mapping onAction event to signInClicked method</div>
</div>
<div class="paragraph">
<p>If you run the <code>Main</code> program and click three times on the button Sign In, the console will print the hello message three times as shown on Figure 8-3.</p>
</div>
<div id="FIG8-2" class="imageblock">
<div class="content">
<img src="./images/fig_8_02.png" alt="fig 8 02">
</div>
<div class="title">Figure 3. After clicking 3 times on Sign In button</div>
</div>
<div class="paragraph">
<p>So there is a link between the GUI and the controller. If we had several buttons on the GUI, we could either map each of them to a separate method in controller, or have one method, which could recognize which button was clicked. The controller will invoke your event handler providing the <code>ActionEvent</code> object as an argument. Its property <code>target</code> identifies, well the target of the event, which is a Sign In button in our case.</p>
</div>
<div class="paragraph">
<p>I ran our application in the debug mode just to show you that the <code>target</code> property on the <code>ActionEvent</code> correctly recognizes the event target shown in Figure 8-4.</p>
</div>
<div id="FIG8-3" class="imageblock">
<div class="content">
<img src="./images/fig_8_03.png" alt="fig 8 03">
</div>
<div class="title">Figure 4. Viewing properties of ActionEvent in debugger</div>
</div>
<div class="paragraph">
<p>There is another event property <code>source</code>, which has the same value as <code>target</code> in our application. There are cases when <code>source</code> and <code>target</code> are different because an event travels through all containers until it reaches the target. So if a component is nested inside a container would be located in. This is an advanced topic, but I still want to give you an illustration.</p>
</div>
<div class="paragraph">
<p>When you want to handle button clicks, you don&#8217;t really care in which area inside the button was the mouse pointer when the user clicked on the button. So handing <code>ActionEvent</code> was sufficient. But there is another event called <code>MouseEvent</code>, which gives you more details on the click event.</p>
</div>
<div class="paragraph">
<p>In your signin.fxml you&#8217;re allowed to use <code>onMouseClicked</code> instead of <code>onAction</code> for the button. But if you do so, the <code>Button</code> will be considered a container for a special skin class <code>LabeledText</code> with the text <em>Sign In</em>, and if you click on the words <em>Sign In</em> the source of the event will be <code>Button</code>, and the target would be the class <code>LabeledSkin</code>. I&#8217;ve created an event handler <code>signInMouseClicked</code> and ran it through a debugger. Now the source and target of the event are different.</p>
</div>
<div id="FIG8-4" class="imageblock">
<div class="content">
<img src="./images/fig_8_04.png" alt="fig 8 04">
</div>
<div class="title">Figure 5. Viewing properties of MouseEvent in debugger</div>
</div>
</div>
<div class="sect3">
<h4 id="_data-exchange-between-gui-components-and-controller"><a class="anchor" href="#_data-exchange-between-gui-components-and-controller"></a>Data Exchange Between GUI Components And Controller</h4>
<div class="paragraph">
<p>No that we know how to link controller&#8217;s event handlers to FXML components, the next question is how to read/write data from/to these components. In case of Sign In application we need to know what ID/Password the user entered and update the GUI from the controller accordingly.</p>
</div>
<div class="paragraph">
<p>To read the values from GUI components we&#8217;ll need to give them unique id&#8217;s in the FXML file. We don&#8217;t need to give id&#8217;s to all component - only to those that have values for handling. Take a look at the <code>&lt;childrens&gt;</code> section of signin.fxml:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="xml language-xml">&lt;children&gt;
   &lt;Label alignment="CENTER" text="User ID:" /&gt;
   &lt;Label text="Password:"  styleClass="bluelabel" GridPane.rowIndex="1" /&gt;
   &lt;Button id="submitBtn" mnemonicParsing="false" prefWidth="300.0" text="Sign In"
           GridPane.columnSpan="2" GridPane.rowIndex="2"
           onAction="#signInClicked"/&gt;
   &lt;TextField GridPane.columnIndex="1" fx:id="id" /&gt;
   &lt;PasswordField GridPane.columnIndex="1" GridPane.rowIndex="1" fx:id="pwd"/&gt;
&lt;/children&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Only the <code>TextField</code> and <code>PasswordField</code> have an attribute <code>fx:id</code> - this is how we can assign id&#8217;s in fxml.</p>
</div>
<div class="paragraph">
<p>The next step is to inject them into the variables in the <code>signin.Controller</code> class. The following code fragment shows how to inject component references into the <code>id</code> and <code>pwd</code> fields. This is how I&#8217;ll declared two Java variables in the <code>Controller</code> clas with the names that match those from signin.fxml:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">@FXML private TextField id;

@FXML private PasswordField pwd;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Java has so called annotations (not covered in this book). They start with <code>@</code> sign and can be placed in front of the variable, class, or a method declaration depending on how  the annotation was defined. Some annotations are used by Java compiler, and some by the JVM. The JavaFX annotation <code>@FXML</code> instructs runtime to inject the references to the specifies GUI objects into the variables.</p>
</div>
<div class="paragraph">
<p>In other words, JavaFX runtime will read the first line as follows: "I need to get the object that I created after loading signin.fxml file, and then inside this object find the component with an the <code>fx:id="id"</code>. Finally, I need to insert the reference to this component into the Java variable <code>id</code>". The same applies to the variable <code>pwd</code>.</p>
</div>
<div class="paragraph">
<p>The rest is easy. Just use the injected values in you event handler. The code of our <code>Controller</code> is shown next. Its method <code>signInClicked</code> checks the value entered in the User ID field in the GUI, and if it&#8217;s not equal to "Yakov", then the code sets the background of the GUI component to pink color.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">public class Controller {

  @FXML private TextField id;            //  <i class="conum" data-value="1"></i><b>(1)</b>

  @FXML private PasswordField pwd;       //  <i class="conum" data-value="1"></i><b>(1)</b>

  public void signInClicked(ActionEvent evt){

    String userID = id.getText();      //   <i class="conum" data-value="2"></i><b>(2)</b>
    String password = pwd.getText();   //   <i class="conum" data-value="2"></i><b>(2)</b>

    if (!"Yakov".equals(userID)){      //    <i class="conum" data-value="3"></i><b>(3)</b>
      id.setStyle("-fx-background-color:lightpink;"); <i class="conum" data-value="4"></i><b>(4)</b>
    } else{
      id.setStyle("-fx-background-color:white;");    <i class="conum" data-value="5"></i><b>(5)</b>
    }

    System.out.println("got id:" + userID + ", got password: " + password);

    System.out.println("Hello from signInClicked method in controller");
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Inject the references to GUI components into member variables.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Extract the text from the GUI objects</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Has the user not entered Yakov in the User ID field? We use the negation operator ! here.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Set the background color to <code>lightpink</code> if the entered user id is not Yakov. You can find major CSS color names at <a href="http://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html">http://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html</a></td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Set the background color to back to <code>white</code> if the entered user id is not Yakov.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you run the <code>Main</code> program and enter the wrong user id, the window will look as follows:</p>
</div>
<div id="FIG8-5" class="imageblock">
<div class="content">
<img src="./images/fig_8_05.png" alt="fig 8 05">
</div>
<div class="title">Figure 6. After entering the wrong user id</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_assigning-event-handlers-in-java"><a class="anchor" href="#_assigning-event-handlers-in-java"></a>Assigning Event Handlers in Java</h3>
<div class="paragraph">
<p>If your program is written completely in Java without any use of FXML, you&#8217;ll be assigning event handlers using so called <a href="http://docs.oracle.com/javafx/2/events/convenience_methods.htm">convenience methods</a> that have names that start with <code>setOn</code> like <code>setOnAction</code>, <code>setOnKeyTyped</code>, <code>setOnEditStart</code> etc. Each of the GUI components has has several of such methods.</p>
</div>
<div class="paragraph">
<p>You can provide event handling code to the convenience methods using anonymous classes, lambda expressions, or method references (not covered in this book). Implementing event handlers as lambda expressions as they are easier to write. Typically, you&#8217;ll be writing code to react if some event has happened. For example, if you have a button represented by a variable <code>myButton</code> you can write an event handler for the click event:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">Button signInButton = new Button("Sign In");
signInButton.setOnAction(evt -&gt;
    System.out.println("The Sign In button was clicked.")
);</code></pre>
</div>
</div>
<div class="paragraph">
<p>You&#8217;ve got introduced lambda expressions in Chapter 5. The above code snippet means that lambda expression gets the event object as an argument, but don&#8217;t really uses its values but just prints the message that the button was clicked.</p>
</div>
<div class="paragraph">
<p>What&#8217;s the type of the <code>evt</code> argument? Java compiler will figure it out automatically. Since the method <code>setOnAction</code> expects to get the <code>ActionEvent</code> object from the JVM, compiler guesses that the type of the <code>evt</code> is <code>ActionEvent</code> so you don&#8217;t even need to write it in the program code. You&#8217;ve seen a similar example of of type inference in Chapter 5.</p>
</div>
<div class="paragraph">
<p>To bring all pieces of the puzzle together, I&#8217;ll show you another version of the Sign In application that will look the same, but won&#8217;t use FXML - everything will be programmed in Java. The following class <code>MainPureJava</code> and <code>signin.css</code> is all we need for programming the functionality of our Sign In window. There is not need to use <code>signin.fxml</code> or <code>Controller.java</code> in this case.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">package signin;

import javafx.application.Application;
import javafx.geometry.Insets;
import javafx.geometry.Pos;
import javafx.scene.*;

public class MainPureJava extends Application {

  public void start(Stage primaryStage) {

    final int TWO_COLUMN_SPAN = 2;               <i class="conum" data-value="1"></i><b>(1)</b>

    Label userIdLbl = new Label("User ID:");     <i class="conum" data-value="2"></i><b>(2)</b>
    TextField userIdTxt = new TextField();
    Label userPwdLbl = new Label("Password:");
    userPwdLbl.getStyleClass().add("bluelabel");
    PasswordField userPwdTxt = new PasswordField();

    GridPane root = new GridPane();              //  <i class="conum" data-value="3"></i><b>(3)</b>
    root.setVgap(20);
    root.setPadding(new Insets(10));
    root.setAlignment(Pos.CENTER);
    root.setId("root");

    // Setting constraints for firs 2 rows
    GridPane.setConstraints(userIdLbl, 0, 0);    //  <i class="conum" data-value="4"></i><b>(4)</b>
    GridPane.setConstraints(userIdTxt, 1, 0);
    GridPane.setConstraints(userPwdLbl, 0, 1);
    GridPane.setConstraints(userPwdTxt, 1, 1);

    root.getChildren().addAll(userIdLbl, userIdTxt,
    userPwdLbl, userPwdTxt);                      //  <i class="conum" data-value="5"></i><b>(5)</b>


    Button signInBtn = new Button ("Sign In");    //  <i class="conum" data-value="6"></i><b>(6)</b>
    signInBtn.setId("submitBtn");  // used in CSS

    // Event handler with lambda expression
    signInBtn.setOnAction(evt -&gt; {                 //  <i class="conum" data-value="7"></i><b>(7)</b>

        String userID = userIdTxt.getText();
        String password = userPwdTxt.getText();
        if (!"Yakov".equals(userID)){
            userIdTxt.setStyle("-fx-background-color: lightpink;");
        } else{
            userIdTxt.setStyle("-fx-background-color: white;");
        }

        System.out.println("Got id " + userID +
                           " and password " + password);
    });

    // Allow the button to be wider
    signInBtn.setPrefWidth(Double.MAX_VALUE);

    // Adding a wide button to the third row
    root.add(signInBtn,0,2,TWO_COLUMN_SPAN,1);

    Scene scene = new Scene(root,250,180);
    scene.getStylesheets()                         <i class="conum" data-value="8"></i><b>(8)</b>
         .add(getClass()
         .getResource("signin.css")
         .toExternalForm());

    primaryStage.setScene(scene);                  <i class="conum" data-value="9"></i><b>(9)</b>
    primaryStage.show();
  }

  public static void main(String[] args) {
      launch(args);
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This programs uses the <code>GridPane</code> layout with three rows and two column. Since the Sign In button will span tho columns, I declared a final variable <code>TWO_COLUMN_SPAN</code> that will be used when the button will be added to the grid.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Then I instantiate labels and text fields.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>After that I create an instance of the <code>GridPane</code> container.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>To add the labels and text fields to the proper cells of the first two rows of the grid, I set the constraints on the <code>GridPane</code> object.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>The GUI components for the first two rows are instantiated, constraints are set so I add them as children to the root of the <em>scene graph</em> - the <code>GridPane</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Now I create the instance if the Sign In button and assign the id to it. This was explained in the Styling with CSS section in Chapter 7.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>The lambda expression implements the application logic to be invoked as a reaction to the <code>ActionEvent</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>The we create a scene object an apply the CSS to it. This is probably the first time you see the method chaining. All these lines that starts with dots are methods chained together - all of them are sequentially invoked on the scene object.</td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td>Finally, the scene is added to the stage and the curtain goes up.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Some programmers like GUI designer tools where they can drag and drop components. Some prefer writing Java code. I prefer working with FXML, because it greatly simplifies  design of the complex windows. Besides separating the design from the application logic is also a good idea because a person who doesn&#8217;t know programming can master Scene Builder and create nice GUI layouts allowing programmers to take care of application logic.</p>
</div>
<div class="sect3">
<h4 id="_further-reading-on-event-handling"><a class="anchor" href="#_further-reading-on-event-handling"></a>Further Reading on Event Handling</h4>
<div class="paragraph">
<p>I&#8217;ve explained you the basics of event handling using the <code>ActionEvent</code> and <code>onAction</code> event handler as an example. Some other examples of the events are:<code>KeyEvent</code> (e.g. the user pressed a key on the keyboard), <code>MouseEvent</code>(e.g. the user pressed the mouse key and we need to know coordinates of the mouse pointer), <code>TouchEvent</code> (e.g. the user touched the screen), <code>WindowEvent</code> (e.g. the user is about to close the window) et al. For more detailed explanation of JavaFX events visit Oracle&#8217;s tutorial about handling events at <a href="http://docs.oracle.com/javafx/2/events/jfxpub-events.htm">http://docs.oracle.com/javafx/2/events/jfxpub-events.htm</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_data-binding-and-properties"><a class="anchor" href="#_data-binding-and-properties"></a>Data Binding and Properties</h3>
<div class="paragraph">
<p>JavaFX has an interface <code>Property</code> located in the package <code>javafx.beans.property</code>, which defines a very useful functionality allowing to <em>bind</em> the GUI components with properties of other Java objects. If a property on a Java object changes, the new value will be automatically reflected on the appropriate GUI component and visa versa. Bi-directional binding is available too, so no matter what changes - the GUI or the Java object - the other party will be immediately notified.</p>
</div>
<div class="paragraph">
<p>Imagine that you&#8217;re developing a multi-player game that has a Java object receiving the moves of other gamers from a central server. When a Java object receives a new move, you need to modify the content of the corresponding GUI component of the game. With JavaFX you can simply bind a property of a Java class that stores player&#8217;s moves (e.g. <code>playersMove</code>) to the property of, say a <code>Label</code> component on the GUI. No more coding required. As soon as the <code>playersMove</code> value changes, the <code>Label</code> will be automatically updated.  JavaFX properties greatly simplify the process of synchronization of the data and the GUI.</p>
</div>
<div class="paragraph">
<p>Existing implementations of the <code>Property</code> interface add  the change notification functionality to regular class attributes. The interface <code>Property</code> declares the following methods: <code>bind</code>, <code>unbind</code>, <code>bindBidirectional</code> , <code>unbindBidirctional</code>, and <code>isBound</code>. You can bind to a JavaFX property only the value of an <code>ObservableValue</code> type, which is explained in the sidebar.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Design Patterns Briefly</div>
<div class="paragraph">
<p>Over the years software developers came up with a number of <em>design patterns</em>, which are reusable solutions for various programming tasks. Programmers casually use design pattern names in their conversations and technical literature. For example, one programmer can say to another , "You&#8217;d better implement MVC in this program", and both understand what this means. Let me explain you briefly a couple of design patterns - MVC and Observer - so you&#8217;ll be a little better prepared for chatting with programmers.</p>
</div>
<div class="paragraph">
<p><strong>MVC</strong> stands for Mode View Controller. This design patter recommends separating the code that stores application data (Model) from the code implementing the user interface (View) and from the code that controls the data exchange and implements application logic (Controller). As a matter of fact we&#8217;ve almost implemented MVC in one of the versions of the Sign In application. The file <em>signin.fxml</em> was a view, and the class <code>signin.Controller</code> played a role of a controller. Since this example had just two variables (<code>id</code> and <code>pwd</code>) we didn&#8217;t created a special model class for them.</p>
</div>
<div class="paragraph">
<p><strong>Observer</strong> design pattern is used to implement scenarios when one object, a.k.a. the observer needs to watch changes in other object(s), the observables. For example, if a Twitter user (the observable) posts a twit all of his followers (observers) will get notified. If a programming language or a library supports data binding, implementing the observer design pattern becomes pretty easy, which you&#8217;ll see in this chapter.</p>
</div>
<div class="paragraph">
<p>If you&#8217;re interested in detailed coverage of design patters, get the book "Head First Design Patterns" published by O&#8217;Reilly Media.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Classes that implement <code>Property</code> interface are located in the package <code>javafx.beans.property</code>. For each property type there are two classes: one that allows only reading property values and the other one for read and writing (changing the values). For example, if you need a <code>String</code> property, use either <code>ReadOnlyStringWrapper</code> or <code>SimpleStringProperty</code>. Similarly named classes exist for other data types and some collections too.</p>
</div>
<div class="paragraph">
<p>As we always do in this book, let&#8217;s learn by coding. I&#8217;ll continue adding features to our Sign In application. This time I&#8217;ll add a <code>Label</code> component with <code>fx:id="errMsg"</code> to the view in FXML file to display sign in error messages if any. In the controller class I&#8217;ll add a corresponding variable <code>errMsg</code> and will inject a reference to the <code>Label</code> into this variable.</p>
</div>
<div class="paragraph">
<p>The next step is to declare a bindable property <code>signinError</code> in the class <code>Controller</code> that will get the value of the error message if any. But since a regular <code>String</code> can&#8217;t be bindable, we&#8217;ll use the data type <code>SimpleStringProperty</code></p>
</div>
<div class="paragraph">
<p>Finally, I&#8217;ll bind the label and the variable to insure that an error message is immediately displayed on the screen as soon as its value changes.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s place an additional <code>Label</code> component at the bottom of the Sign In window. I&#8217;ll add another row to the <code>GridPane</code> and place there a <code>Label</code> that will span two columns. This label will have <code>fx:id="errMsg"</code> and initially won&#8217;t  have any text - it&#8217;ll be invisible. The <code>&lt;children&gt;</code> section of the FXML file will look as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="xml language-xml">&lt;children&gt;
      &lt;Label alignment="CENTER" text="User ID:" /&gt;
      &lt;TextField GridPane.columnIndex="1"  fx:id="id" /&gt;
      &lt;Label text="Password:"  styleClass="bluelabel" GridPane.rowIndex="1" /&gt;
      &lt;PasswordField GridPane.columnIndex="1" GridPane.rowIndex="1" fx:id="pwd"/&gt;
      &lt;Button id="submitBtn" mnemonicParsing="false" prefWidth="300.0" text="Sign In"
              GridPane.columnSpan="2" GridPane.rowIndex="2"
              onAction="#signInClicked"/&gt;
       &lt;Label alignment="CENTER" GridPane.rowIndex="3"
              GridPane.columnSpan="2" prefWidth="300.0" fx:id="errMsg"/&gt;
   &lt;/children&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Injecting a reference of the new label into controller and declaring a property to store the error message will look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">@FXML private Label errMsg;

SimpleStringProperty signinError =
                        new SimpleStringProperty();</code></pre>
</div>
</div>
<div class="paragraph">
<p>The next question is when and where do the binding? If I&#8217;d be creating an instance of the <code>Controller</code> with the <code>new</code> operator I could have done it in the class constructor after the GUI component are created. But JavaFX runtime instantiates the <code>Controller</code> for us, so how can we catch the moment when the GUI components are ready?</p>
</div>
<div class="paragraph">
<p>In JavaFX if you&#8217;ll add to the controller the method <code>initialize</code> annotated with @FXML, <code>FXMLLoader</code> will invoke it after the GUI components are constructed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">@FXML public void initialize() {

  errMsg.textProperty().bind(signinError);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>JavaFX properties are observables. So you can read the above the above code as follows: "I want the text property of the label <code>errMsg</code> to be the observer (a.k.a. listener) to the property <code>signinError</code> (observable). So whenever <code>signinError</code> changes, the text property of the label will get the latest value.</p>
</div>
<div class="paragraph">
<p>To complete the binding Sign In example, the event handler for the Sign In button should not only paint the wronn ID in light pink, but also modify the value of the <code>signinError</code> property. The complete code of the class <code>BindableController</code> is shown next.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">public class BindingController {

  @FXML
  private TextField id;

  @FXML
  private PasswordField pwd;

  @FXML private Label errMsg;

  SimpleStringProperty signinError = new SimpleStringProperty();

  @FXML public void initialize() {
      System.out.println("Controller's ready. Let's bind some components");

      errMsg.textProperty().bind(signinError);
  }

  public void signInClicked(ActionEvent evt){

      String userID = id.getText();
      String password = pwd.getText();
      if (!"Yakov".equals(userID)){
          id.setStyle("-fx-background-color: lightpink;");
          signinError.set("Wrong id:" + userID);

      } else{
          id.setStyle("-fx-background-color: white;");
          signinError.set("");
      }

      System.out.println("got id:" + userID + ", got password: " + password);

      System.out.println("Hello from signInClicked method in controller");
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that in the if statement I set the error message when the ID is wrong, and reset the <code>signinError</code> to an empty string when the ID is correct. After I ran the Sign In application the above controller, entered Alex as the user ID and clicked the button Sign In, my window looked like this:</p>
</div>
<div id="FIG8-6" class="imageblock">
<div class="content">
<img src="./images/fig_8_06.png" alt="fig 8 06">
</div>
<div class="title">Figure 7. Binding in action after entering the wrong user id</div>
</div>
<div class="paragraph">
<p>Enter the right user ID, click on Sign In again, and the binding mechanism will remove the error message from the window.</p>
</div>
</div>
<div class="sect2">
<h3 id="_application-thread-in-javafx"><a class="anchor" href="#_application-thread-in-javafx"></a>Application Thread in JavaFX</h3>
<div class="paragraph">
<p>In Chapter 6 I gave you a very light introduction to multi-threading. When you work with JavaFX you have to run in separate threads the code that updates the GUI from the code that performs application logic. I&#8217;ll explain you why.
Imagine a program with a GUI that&#8217;s constantly is being updated based on some intensive calculations. It could be a game with multiple moving balls, squares or other shapes. It could be an application for a TV channel that may show a video stream, commercials, viewers polls and more. It could be a business application that displays several pieces of constantly changing information in different parts of the window like prices on eBay auction.</p>
</div>
<div class="paragraph">
<p>Updates of the GUI in JavaFX are done in so called  <em>application thread</em>. The idea is to separate intensive calculations from the GUI updates. Say, the user clicked on the button Play on a JavaFX video streaming application like Netflix. If the requests for the remote video and actual playing of the video (GUI updates) would be done in the same application thread, the video would be choppy - it would be interrupted by running business logic that prepares GUI content. The screen would be "frozen" and the user wouldn&#8217;t be able to use any screen components.</p>
</div>
<div class="sect3">
<h4 id="_the-frozen-screen-demo"><a class="anchor" href="#_the-frozen-screen-demo"></a>The Frozen Screen Demo</h4>
<div class="paragraph">
<p>I can easily demonstrate you a "frozen GUI" effect by making a small change in the class <code>signin.Controller</code> in our Sign In application. The simplest way to emulate a long running process is to place the currently running thread to sleep, as if there is an application logic that takes some time to complete. For example, to put the current thread to sleep for 10 second, you can right the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">try {
    Thread.sleep(10000);  // Sleep for 10 sec

} catch (InterruptedException interExp) {
    interExp.printStackTrace();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This code snippet has so-called try-catch block, which is required in some cases for error handling. The next chapter  explains the error processing subject in details. But at this point let&#8217;s just focus on the code located inside the curly braces after the keyword <code>try</code>.</p>
</div>
<div class="paragraph">
<p>The method <code>sleep</code> of class <code>Thread</code> takes one argument - the sleeping time in milliseconds. There are 1000  milliseconds in one second, so the above code snippet will place the current thread to sleep for 10 second.</p>
</div>
<div class="paragraph">
<p>Remember, the controller class has an event handler for the Sign In button? It executes in the JavaFX application thread. I&#8217;ll add the 10-second sleeping code to the application thread to emulate the process that would perform actual sign in. This is wrong - you should execute the application logic in a separate thread. But I do it on purpose to demonstrate the frozen effect.</p>
</div>
<div class="paragraph">
<p>The following code fragment from the new controller class shows hos the event handler <code>signInClicked</code> invokes the method named <code>wrongStartOfLongRunningProcess</code>, which sleeps for 10 seconds and then checks if the entered user ID is Yakov.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">public void signInClicked(ActionEvent evt){

    String userID = id.getText();
    String password = pwd.getText();

    wrongStartOfLongRunningProcess(userID);

    System.out.println("got id:" + userID + ", got password: " + password);
}

private void wrongStartOfLongRunningProcess(String uID) {
    try {
        Thread.sleep(10000);  // Sleep for 10 sec
    } catch (InterruptedException interExp) {
        interExp.printStackTrace();
    }

    if (!"Yakov".equals(uID)){
        id.setStyle("-fx-background-color: lightpink;");
    } else{
        id.setStyle("-fx-background-color: white;");
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Basically, when the user clicks on the Sign In button, the application thread will become busy for 10 seconds, and only then checks the user ID and set the background color of the <code>TextField</code> on the screen. If you&#8217;ll run the Sign In sample with such event handler, the application window becomes frozen and unresponsive for 10 seconds. If the user will try to reenter the ID, he&#8217;ll see a wait cursor. On MAC OS computers such a cursor looks as a spinning <em>wheel of death</em> as shown on Figure 8-7.</p>
</div>
<div id="FIG8-7" class="imageblock">
<div class="content">
<img src="./images/fig_8_07.png" alt="fig 8 07">
</div>
<div class="title">Figure 8. Frozen Screen with a wheel of death</div>
</div>
<div class="paragraph">
<p>Ten seconds later, the application thread wakes up, and the GUI becomes responsive again. Let&#8217;s fix this code and create a separate thread emulating the long running process so that the application thread can continue working with GUI. The following code listing shows the complete code of the class <code>ControllerLongRunningThread</code>, which doesn&#8217;t freeze the window.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">public class ControllerLongRunningThread {

  @FXML private TextField id;

  @FXML private PasswordField pwd;

  public void signInClicked(ActionEvent evt){

    String userID = id.getText();
    String password = pwd.getText();

    rightStartOfLongRunningProcess(userID);

    System.out.println("got id:" + userID +
                       ", got password: " + password);
  }

  private void rightStartOfLongRunningProcess(String uID) {

    Runnable loginTask = () -&gt; {                       <i class="conum" data-value="1"></i><b>(1)</b>
      try {
        Thread.sleep(10000);                           <i class="conum" data-value="2"></i><b>(2)</b>

        Platform.runLater(() -&gt; {                      <i class="conum" data-value="3"></i><b>(3)</b>
          if (!"Yakov".equals(uID)){
            id.setStyle("-fx-background-color: lightpink;");
          } else{
            id.setStyle("-fx-background-color: white;");
          }
        });

      } catch (InterruptedException interExp) {
          interExp.printStackTrace();
      }
    };                                                //  <i class="conum" data-value="4"></i><b>(4)</b>

    Thread workerThread = new Thread(loginTask);      //  <i class="conum" data-value="5"></i><b>(5)</b>
    workerThread.start();                             //  <i class="conum" data-value="6"></i><b>(6)</b>
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The code in the method <code>rightStartOfLongRunningProcess</code> declares the lambda expression <code>loginTask</code> as implementation of the <code>Runnable</code> interface. At this point no thread is created yet - we&#8217;ll do it at the end of the method <code>rightStartOfLongRunningProcess</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The lambda expression places the current thread to sleep for 10 second, but it won&#8217;t be the application thread, because we&#8217;ll create a separate worker thread for it (see the notes 5 and 6 below).</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>When the sleep is over, we need to pass control back from the worker to application thread to update the GUI. For that, JavaFX has a special method <code>runLater</code> in the class <code>Platform</code>. The method <code>runLater</code> will place the request to update the GUI into a special event queue of the application thread.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>End of the lambda expression declaration</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Now we create the instance of the worker thread passing the lambda expression to it.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>The method <code>start</code> of the class <code>Thread</code> starts the executing of the lambda&#8217;s code in a separate worker thread.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In the chapter on Ping-Pong game we&#8217;ll use multiple threads too.One thread will be responsible for displaying the ping-pong table, while the other one will calculate coordinates of the ball and paddles.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_deploying-with-javafx-packager"><a class="anchor" href="#_deploying-with-javafx-packager"></a>Deploying With JavaFX Packager</h3>
<div class="paragraph">
<p>How do you start a JavaFX application? Well, you can start it either from the IDE or from a command line as any other Java application. But what if you want to give your application to your grandma, what may not be as good at Java as you are? Of course, you can pay her a visit, install the Java runtime on her computer, and teach her how to open a command ot Terminal window and enter <code>java signin.Main</code>.</p>
</div>
<div class="paragraph">
<p>You may even learn how to use scripting languages and create a file <code>signin.bat</code> on Windows or <code>signin.sh</code> on MAC OS that will have the java command inside. You can even create an icon that will run this script. But what if everyone in your school want to have your program installed on their computers? Now if becomes a time-consuming task.</p>
</div>
<div class="paragraph">
<p>But the best way to prepare your JavaFX application for distribution is to create a self-contain file <code>signin.exe</code> for Windows or <code>signin.dmg</code> for MAC OS. This file will contain both the Java runtime and your application code. This process is described in details in Oracle&#8217;s tutorial titled <a href="http://docs.oracle.com/javafx/2/deployment/self-contained-packaging.htm#BCGIBBCI">"Self-Contained Application Packaging</a>. I&#8217;m not going to repeat this tutorial here, but will leave it for you as a self-study project.</p>
</div>
<div class="paragraph">
<p>I&#8217;m sure many of you want to know if it&#8217;s possible to use JavaFX for writing applications for smart phones. Oracle doesn&#8217;t offer the JavaFX libraries for mobile platforms, but it&#8217;s still possible.</p>
</div>
<div class="paragraph">
<p>To develop JavaFX applications for iOS, you&#8217;d need to install and learn on your own some additional software, namely RoboVM[<a href="http://www.robovm.com/">http://www.robovm.com/</a>] is an SDK for converting Java bytecode into a native device code as if it was written in C programming language, which makes it deployable on iOS devices.</p>
</div>
<div class="paragraph">
<p>There is also a community site JavaFX Ports[ <a href="http://javafxports.org/page/home">http://javafxports.org/page/home</a>] where people are working on deployment of JavaFX applications on iOS and Android devices.</p>
</div>
</div>
<div class="sect2">
<h3 id="_what-to-study-next-about-javafx"><a class="anchor" href="#_what-to-study-next-about-javafx"></a>What to Study Next About JavaFX</h3>
<div class="paragraph">
<p>In Chapters 7 and 8 I gave you a very brief introduction to JavaFX. You&#8217;ll be writing more of JavaFX code in Chapter 9 and while working on the Tic-Tac-Toe and Ping-Pong games, but JavaFX has lots of interesting features that you may want to explore on your own. JavaFX has more than 60 GUI components, so try to play with them. Also, JavaFX allows you to integrate audio and video in your application, create special effects and transitions to make your programs as cool and entertaining as you want them to be. You may find some interesting capabilities by researching classes located in the package <code>javafx.animation</code>.</p>
</div>
<div class="paragraph">
<p>Pick up a book on JavaFX 8 or later and experiment on your own. One of the better books on the subject is "Pro JavaFX 8: A Definite Guide to Building Desktop, Mobile, and Embedded Java Clients" published by Apress.</p>
</div>
</div>
<div class="sect2">
<h3 id="_project-adding-events-handling-for-calculator"><a class="anchor" href="#_project-adding-events-handling-for-calculator"></a>Project: Adding Events Handling for Calculator</h3>
<div class="paragraph">
<p>The goal of this project is to complete the calculator program. If you completed the project from Chapter 7, you can continue working on it. But if you couldn&#8217;t complete it on your own, download the version of the calculator GUI that comes with the sample code for this chapter.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a Java class <code>CalculatorController</code> in the same IDEA project where the calculator&#8217;s GUI is located.</p>
</li>
<li>
<p>Modify the file <code>calculator.fxml</code>: add to it the attribute <code>fx:controller="CalculatorController"</code> so it knows the name of the class with the application logic.  Use the code of the <code>signing.fxml</code> from this chapter for reference.</p>
</li>
<li>
<p>Create two separate event handler methods in the class  <code>CalculatorController</code>. Name the first method <code>digitClickedHandler</code> - it will contain the code to process clicks on the digit buttons. Name the second method  <code>operationClickHandler</code> - it will contain the code to process clicks on such buttons as Plus, Minus, et al.</p>
</li>
<li>
<p>Modify the file <code>calculator.fxml</code> and assign the name of the click handler method for each button using the attribute <code>onAction</code> as we did in the Sign In example.</p>
</li>
<li>
<p>In each handler method add the code to recognize which button has been clicked. You can do the label of the clicked button by querying the <code>ActionEvent</code> object that will be provided for each event handler method. For example if the variable <code>evt</code> represents the <code>ActionEvent</code> object, the code can look like this:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="java language-java">Button clickedButton = (Button) evt.getTarget();
String buttonLabel = clickedButton.getText();</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If the use clicked the digit button, get the current value from the calculator&#8217;s display field, concatenate the button&#8217;s lable and assignn the new value back to the display field.</p>
</li>
<li>
<p>You need to declare a variable, say <code>valueOne</code> in the controller to store the current value of the display field when the user clicks on the operation button. For example, if the user clicked on the button with the label <code>+</code>, <code>-</code>, <code>/</code>, or <code>*</code>, it&#8217;s a signal that the user finished entering the first number. Store it in the variable <code>valueOne</code> and clear the display field so the user can start entering the second number.</p>
</li>
<li>
<p>Declare a variable, say <code>operation</code>, to remember the operation that the user wants to perform. For example, if the user clicked on <code>+</code>, store <code>+</code> in the variable <code>operation</code>.</p>
</li>
<li>
<p>If the user clicks on the button <code>=</code>, get the value from <code>valueOne</code> and from the display field and perform the operation according to the value in <code>operation</code>. Use the <code>switch</code> statement to perform different operations.</p>
</li>
<li>
<p>After the operation is complete, assign the result to the display field by using the method <code>setText</code> of the <code>TextField</code> component.</p>
</li>
<li>
<p>Store the calculated result in the variable <code>valueOne</code> so the user can continue performing other operation. For example if the first operation was 2+3, the display shows 5, and the user can click on the buttons <code>*</code> followed by 4 requesting multiplication of 5 by 4.</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_challenge-yorself"><a class="anchor" href="#_challenge-yorself"></a>Challenge Yorself</h4>
<div class="paragraph">
<p>The step 10 in the project assignment suggest that you should use the the method <code>setText</code> of the <code>TextField</code> component. See if you can apply the property binding technique to display the result in the display field.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2014-10-23 20:53:16 EDT
</div>
</div>
</body>
</html>